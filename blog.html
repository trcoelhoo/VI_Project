<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <script src="http://d3js.org/d3.v6.js"></script>
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Cinemas de Portugal</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
      <style>
         .listening-rect {
            fill: transparent;
            }
      </style>
   </head>
   <!-- body -->
   <body class="main-layout inner_header blog_page">
      <!-- loader  -->
      <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#" /></div>
      </div>
      <!-- end loader -->
      <!-- header -->
      <header>
         <!-- header inner -->
         <div class="header">
            <div class="container">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                     <div class="full">
                        <div class="center-desk">
                           <div class="logo">
                              <a href="index.html"><img src="images/logo.png" alt="#" /></a>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                     <nav class="navigation navbar navbar-expand-md navbar-dark ">
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarsExample04">
                           <ul class="navbar-nav mr-auto">
                              <li class="nav-item ">
                                 <a class="nav-link" href="index.html">Home</a>
                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" href="about.html">Regiões</a>
                              </li>
                              <li class="nav-item active">
                                 <a class="nav-link" href="blog.html">Portugal</a>

                              </li>
                              <li class="nav-item">
                                 <a class="nav-link" href="contact.html">Filmes</a>
                              </li>
                           </ul>
                        </div>
                     </nav>
                  </div>
               </div>
            </div>
         </div>
      </header>
      <!-- end header inner -->
      <!-- end header -->
      <div class="yellow_darkbg">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <div class="titlepage">
                     <h2>Dados gerais de Portugal</h2>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- blog -->
      <div class="blog">
         <div class="container">
            

               <div class="blog_box">
                  <!-- Line chart with data from portugal-->
                  <div class="row">
                     <div class="col-md-12">
                        <div class="titlepage">
                           <h3 id="title">Gráfico de recintos de cinema em Portugal desde 2011 até 2021</h3>
                        
                        </div>
                        
                        
                     </div>
                  </div>
                  <div class="row d_flex">
                     <div class="linechart" id="linechart_material" style="width: 760px; height: 500px;">
                        
                     </div>
                     <div class="col-md-4 col-sm-12">
                          <div class="col-md-6">
                     
                     <!--place where linechart will display after script-->
                           
                           <div class="buttons">
                              <p>Opções:</p>
                              <button type="button" class="sub_btn" onclick="changeData('recintos')">Recintos</button>
                              <br>
                              <br>
                              <button type="button" class="sub_btn" onclick="changeData('ecras')">Ecrãs</button>
                              <br>
                              <br>
                              <button type="button" class="sub_btn" onclick="changeData('espectadores')">Espectadores</button>
                              <br> 
                              <br>
                              <button type="button" class="sub_btn" onclick="changeData('receitas')">Receitas</button>
                              <br>
                              <br>
                              <button type="button" class="sub_btn" onclick="changeData('sessoes')">Sessões</button>
                              <br>
                              <br>
                           </div>
                        </div>
                     </div>
                  </div>
                  
                  
                  
                  


               </div>
                     
            </div>
         </div>
      </div>
      <script type="text/javascript" >
         changeData("recintos");
         
         function changeData(tipo){
            d3.selectAll("svg").remove();
            if(tipo=="ecras"){
               document.getElementById("title").innerHTML = "Gráfico de ecrãs de cinema em Portugal desde 2011 até 2021";
            }

            else if(tipo=="sessoes"){
               document.getElementById("title").innerHTML = "Gráfico de sessões de cinema em Portugal desde 2011 até 2021";
            }
            else{
               document.getElementById("title").innerHTML = "Gráfico de "+tipo+" em Portugal desde 2011 até 2021";
            }
            
            var margin = {top: 10, right: 30, bottom: 30, left: 60},
            width = 660 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;

            // append the svg object to the body of the page
            var svg = d3.select("#linechart_material")
            .append("svg")
               .attr("width", width + margin.left + margin.right)
               .attr("height", height + margin.top + margin.bottom)
            .append("g")
               .attr("transform",
                     "translate(" + margin.left + "," + margin.top + ")")
              
               
            //console.log(svg);
            var dataCsv= "datasets/Portugal/"+tipo+"_portugal.csv";
            //get data from csv
            d3.csv(dataCsv).then(function(data) {
               if(tipo=="recintos"){
                  var x = d3.scaleLinear()
                     .domain([2011, 2021])
                     .range([ 0, width ]);

                  svg.append("g")
                     .attr("transform", "translate(0," + height + ")")
                     .call(d3.axisBottom(x));
                  //console.log(svg);

                  // Add Y axis
                  var y = d3.scaleLinear()
                     .domain([d3.min(data, function(d) { return parseInt(d.Recintos); })-5, d3.max(data, function(d) { return parseInt(d.Recintos); })+5])
                     .range([ height, 0 ]);
                  svg.append("g")
                     .call(d3.axisLeft(y));

                  // Add the line
                  svg.append("path")
                     .datum(data)
                     .attr("fill", "none")
                     .attr("stroke", "steelblue")
                     .attr("stroke-width", 1.5)
                     .attr("d", d3.line()
                     .x(function(d) { return x(d.Anos) })
                     .y(function(d) { return y(d.Recintos) })
                     )
                  //add the dots
                  var data= data.map(function(d) { return {Anos: d.Anos, Recintos: d.Recintos}; });
                  svg.selectAll("circle")
                     .data(data)
                     .enter()
                     .append("circle")
                     .attr("cx", function(d) {return x(d.Anos) } )
                     .attr("cy", function(d) { return y(d.Recintos) } )
                     .attr("r", 5)
                     .attr("fill", "red")
                     .attr("stroke", "black")
                     .attr("stroke-width", 1)
                     .on("mouseover", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 10)
                           .attr("fill", "orange")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                        
                        d3.select(this)
                           .append("title")
                           .text("Ano: "+this.__data__.Anos+"\nRecintos: "+this.__data__.Recintos);
                        
                     })
                     .on("mouseout", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 5)
                           .attr("fill", "red")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                     });
                     

                  //add legend axis
                  svg.append("text")
                     .attr("transform", "translate(" + (width/2) + " ," + (height + margin.top + 20) + ")")
                     .style("text-anchor", "middle")
                     .text("Anos");

                  svg.append("text")
                     .attr("transform", "rotate(-90)")
                     .attr("y", 0 - margin.left)
                     .attr("x",0 - (height / 2))
                     .attr("dy", "1em")
                     .style("text-anchor", "middle")
                     .text("Número de Recintos");

                  


                  
                  


               }else if(tipo=="ecras"){
                  var x = d3.scaleLinear()
                     .domain(d3.extent(data, function(d) {  return +d.Anos; }))
                     .range([ 0, width ]);

                  svg.append("g")
                     .attr("transform", "translate(0," + height + ")")
                     .call(d3.axisBottom(x));
                  //console.log(svg);

                  // Add Y axis
                  var y = d3.scaleLinear()
                     .domain([d3.min(data, function(d) { return parseInt(d.Ecrãs); })-10, d3.max(data, function(d) { return parseInt(d.Ecrãs); })+10])
                     .range([ height, 0 ]);
                  svg.append("g")
                     .call(d3.axisLeft(y));

                  // Add the line
                  svg.append("path")
                     .datum(data)
                     .attr("fill", "none")
                     .attr("stroke", "steelblue")
                     .attr("stroke-width", 1.5)
                     .attr("d", d3.line()
                     .x(function(d) { return x(d.Anos) })
                     .y(function(d) { return y(d.Ecrãs) })
                     )
                  
                  //add the dots
                  var data= data.map(function(d) { return {Anos: d.Anos, Ecrãs: d.Ecrãs}; });
                  svg.selectAll("circle")
                     .data(data)
                     .enter()
                     .append("circle")
                     .attr("cx", function(d) { return x(d.Anos) } )
                     .attr("cy", function(d) { return y(d.Ecrãs) } )
                     .attr("r", 5)
                     .attr("fill", "red")
                     .attr("stroke", "black")
                     .attr("stroke-width", 1)
                     .on("mouseover", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 10)
                           .attr("fill", "orange")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                        
                        d3.select(this)
                           .append("title")
                           .text("Ano: "+this.__data__.Anos+"\nEcrãs: "+this.__data__.Ecrãs);
                        
                     })
                     .on("mouseout", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 5)
                           .attr("fill", "red")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                     });

                  //add legend axis
                  svg.append("text")
                     .attr("transform", "translate(" + (width/2) + " ," + (height + margin.top + 20) + ")")
                     .style("text-anchor", "middle")
                     .text("Anos");

                  svg.append("text")
                     .attr("transform", "rotate(-90)")
                     .attr("y", 0 - margin.left)
                     .attr("x",0 - (height / 2))
                     .attr("dy", "1em")
                     .style("text-anchor", "middle")
                     .text("Número de Ecrãs");
               }else if(tipo=="espectadores"){
                  var x = d3.scaleLinear()
                     .domain(d3.extent(data, function(d) {  return +d.Anos; }))
                     .range([ 0, width ]);

                  svg.append("g")
                     .attr("transform", "translate(0," + height + ")")
                     .call(d3.axisBottom(x));
                  //console.log(svg);

                  // Add Y axis
                  var y = d3.scaleLinear()
                     .domain([d3.min(data, function(d) { return parseInt(d.Espectadores); })-1000, d3.max(data, function(d) { return parseInt(d.Espectadores); })+1000])
                     .range([ height, 0 ]);
                  svg.append("g")
                     .call(d3.axisLeft(y));

                  // Add the line
                  svg.append("path")
                     .datum(data)
                     .attr("fill", "none")
                     .attr("stroke", "steelblue")
                     .attr("stroke-width", 1.5)
                     .attr("d", d3.line()
                     .x(function(d) { return x(d.Anos) })
                     .y(function(d) { return y(d.Espectadores) })
                     )
                  
                  //add the dots
                  var data= data.map(function(d) { return {Anos: d.Anos, Espectadores: d.Espectadores}; });
                  svg.selectAll("circle")
                     .data(data)
                     .enter()
                     .append("circle")
                     .attr("cx", function(d) { return x(d.Anos) } )
                     .attr("cy", function(d) { return y(d.Espectadores) } )
                     .attr("r", 5)
                     .attr("fill", "red")
                     .attr("stroke", "black")
                     .attr("stroke-width", 1)
                     .on("mouseover", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 10)
                           .attr("fill", "orange")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                        
                        d3.select(this)
                           .append("title")
                           .text("Ano: "+this.__data__.Anos+"\nEspectadores: "+this.__data__.Espectadores);
                        
                     })
                     .on("mouseout", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 5)
                           .attr("fill", "red")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                     });

                  //add legend axis
                  svg.append("text")
                     .attr("transform", "translate(" + (width/2) + " ," + (height + margin.top + 20) + ")")
                     .style("text-anchor", "middle")
                     .text("Anos");

                  svg.append("text")
                     .attr("transform", "rotate(-90)")
                     .attr("y", 0 - margin.left)
                     .attr("x",0 - (height / 2))
                     .attr("dy", "1em")
                     .style("text-anchor", "middle")
                     .text("Número de Espectadores");
               }else if(tipo=="sessoes"){
                  var x = d3.scaleLinear()
                     .domain(d3.extent(data, function(d) {  return +d.Anos; }))
                     .range([ 0, width ]);

                  svg.append("g")
                     .attr("transform", "translate(0," + height + ")")
                     .call(d3.axisBottom(x));
                  //console.log(svg);

                  // Add Y axis
                  var y = d3.scaleLinear()
                     .domain([d3.min(data, function(d) { return parseInt(d.Sessões); })-10000, d3.max(data, function(d) { return parseInt(d.Sessões); })+10000])
                     .range([ height, 0 ]);
                  svg.append("g")
                     .call(d3.axisLeft(y));

                  // Add the line
                  svg.append("path")
                     .datum(data)
                     .attr("fill", "none")
                     .attr("stroke", "steelblue")
                     .attr("stroke-width", 1.5)
                     .attr("d", d3.line()
                     .x(function(d) { return x(d.Anos) })
                     .y(function(d) { return y(d.Sessões) })
                     )
                  
                  //add the dots
                  var data= data.map(function(d) { return {Anos: d.Anos, Sessões: d.Sessões}; });
                  svg.selectAll("circle")
                     .data(data)
                     .enter()
                     .append("circle")
                     .attr("cx", function(d) { return x(d.Anos) } )
                     .attr("cy", function(d) { return y(d.Sessões) } )
                     .attr("r", 5)
                     .attr("fill", "red")
                     .attr("stroke", "black")
                     .attr("stroke-width", 1)
                     .on("mouseover", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 10)
                           .attr("fill", "orange")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                        
                        d3.select(this)
                           .append("title")
                           .text("Ano: "+this.__data__.Anos+"\nSessões: "+this.__data__.Sessões);
                        
                     })
                     .on("mouseout", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 5)
                           .attr("fill", "red")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                     });

                  //add legend axis
                  svg.append("text")
                     .attr("transform", "translate(" + (width/2) + " ," + (height + margin.top + 20) + ")")
                     .style("text-anchor", "middle")
                     .text("Anos");

                  svg.append("text")
                     .attr("transform", "rotate(-90)")
                     
                     .attr("y", -3 - margin.left)
                     .attr("x",0 - (height / 2))
                     .attr("dy", "1em")
                     .style("text-anchor", "middle")
                     .text("Número de Sessões");
               }else{
                  var x = d3.scaleLinear()
                     .domain(d3.extent(data, function(d) {  return +d.Anos; }))
                     .range([ 0, width ]);

                  svg.append("g")
                     .attr("transform", "translate(0," + height + ")")
                     .call(d3.axisBottom(x));
                  //console.log(svg);

                  // Add Y axis
                  var y = d3.scaleLinear()
                     .domain([d3.min(data, function(d) { return parseInt(d.Receitas); })-2000, d3.max(data, function(d) { return parseInt(d.Receitas); })+2000])
                     .range([ height, 0 ]);
                  svg.append("g")
                     .call(d3.axisLeft(y));

                  // Add the line
                  svg.append("path")
                     .datum(data)
                     .attr("fill", "none")
                     .attr("stroke", "steelblue")
                     .attr("stroke-width", 1.5)
                     .attr("d", d3.line()
                     .x(function(d) { return x(d.Anos) })
                     .y(function(d) { return y(d.Receitas) })
                     )
                  
                  //add the dots
                  var data= data.map(function(d) { return {Anos: d.Anos, Receitas: d.Receitas}; });
                  svg.selectAll("circle")
                     .data(data)
                     .enter()
                     .append("circle")
                     .attr("cx", function(d) { return x(d.Anos) } )
                     .attr("cy", function(d) { return y(d.Receitas) } )
                     .attr("r", 5)
                     .attr("fill", "red")
                     .attr("stroke", "black")
                     .attr("stroke-width", 1)
                     .on("mouseover", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 10)
                           .attr("fill", "orange")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                        
                        d3.select(this)
                           .append("title")
                           .text("Ano: "+this.__data__.Anos+"\nReceitas: "+this.__data__.Receitas+"€");
                        
                     })
                     .on("mouseout", function(d) {
                        d3.select(this)
                           .transition()
                           .duration(500)
                           .attr("r", 5)
                           .attr("fill", "red")
                           .attr("stroke", "black")
                           .attr("stroke-width", 1);
                     });

                  //add legend axis
                  svg.append("text")
                     .attr("transform", "translate(" + (width/2) + " ," + (height + margin.top + 20) + ")")
                     .style("text-anchor", "middle")
                     .text("Anos");

                  svg.append("text")
                     .attr("transform", "rotate(-90)")
                     .attr("y", 0 - margin.left)
                     .attr("x",0 - (height / 2))
                     .attr("dy", "1em")
                     .style("text-anchor", "middle")
                     .text("Receitas em €");
               }

               


               

                  
            })
            
         }
      </script>

      <!-- blog -->
      <!--  footer -->
      <footer>
         <div class="footer">
            <div class="container">
               <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
                     <img class="logo1" src="images/logo1.png" alt="#"/>
                     <ul class="about_us">
                        <li>Todos os dados<br> presentes<br>foram retirados <br> da PORDATA</li>
                     </ul>
                     <ul class="social_icon">
                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-linkedin-square" aria-hidden="true"></i></a></li>
                        <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                     </ul>
                  </div>
                  <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
                     <h3>Useful Link</h3>
                     <ul class="link_menu">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">About services</a></li>
                        <li><a href="#">About Departments</a></li>
                        <li><a href="#">Services</a></li>
                        <li><a href="#">Contact Us</a></li>
                     </ul>
                  </div>
                  <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
                     <h3>The Services</h3>
                     <ul class="link_menu">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">About services</a></li>
                        <li><a href="#">About Departments</a></li>
                        <li><a href="#">Services</a></li>
                        <li><a href="#">Contact Us</a></li>
                     </ul>
                  </div>
                  <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
                     <h3>Contact Us</h3>
                     <ul class="link_menu">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">About services</a></li>
                        <li><a href="#">About Departments</a></li>
                        <li><a href="#">Services</a></li>
                        <li><a href="#">Contact Us</a></li>
                     </ul>
                  </div>

               </div>
            </div>

         </div>
      </footer>
      <!-- end footer -->
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
   </body>
</html>

